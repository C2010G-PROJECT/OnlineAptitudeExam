@model PagedList.IPagedList<OnlineAptitudeExam.Models.CustomModel.TestReport>
@using PagedList.Mvc;
@using OnlineAptitudeExam.Utils;
@{
    Layout = null;
}

<div class="card card-body shadow-sm">
    <div class="table-responsive">
        <table class="table table-custom table-hover table-bordered" data-sort="@ViewBag.CurrentSort" data-order="@ViewBag.CurrentOrder">
            @{
                string orderStt = SortHelper.GetOrder(SortHelper.STT, ViewBag.CurrentSort, ViewBag.CurrentOrder);
                string stt = SortHelper.ValueOrNull(SortHelper.STT, orderStt);
                string orderName = SortHelper.GetOrder(SortHelper.NAME, ViewBag.CurrentSort, ViewBag.CurrentOrder);
                string name = SortHelper.ValueOrNull(SortHelper.NAME, orderName);
            }
            <thead>
                <tr>
                    <th class="sortable" data-sort="@SortHelper.STT" data-url="@Url.Action("GetData", new { sort = stt, order = orderStt, filter = ViewBag.CurrentFilter, d_start = ViewBag.CurrentDateStart, d_end = ViewBag.CurrentDateEnd })">
                        #
                    </th>
                    <th class="sortable" data-sort="@SortHelper.NAME" data-url="@Url.Action("GetData", new { sort = name, order = orderName, filter = ViewBag.CurrentFilter, d_start = ViewBag.CurrentDateStart, d_end = ViewBag.CurrentDateEnd })">
                        Test Name
                    </th>
                    <th style="width:20%">
                        Total Users
                    </th>
                    <th style="width:100px">Actions</th>
                </tr>
            </thead>

            <tbody>
                @for (int i = 0; i < Model.Count(); i++)
                {
                    var item = Model[i];
                    <tr data-id='@item.id'>
                        <td>
                            @((Model.PageNumber - 1) * Model.PageSize + i + 1)
                        </td>
                        <td class="field-name">
                            @item.name
                        </td>
                        <td>
                            @item.totalUser
                        </td>
                        <td class="d-flex justify-content-center">
                            <button class="btn btn-primary btn-sm ms-1 me-1" onclick="showDetailTest($(this))">
                                <i class="mdi mdi-text-box-multiple-outline"></i>
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <br />
    </div>
    <div id="contentPager">
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
        @Html.PagedListPager(Model, page => Url.Action("GetData", new
   {
       sort = ViewBag.CurrentSort,
       order = ViewBag.CurrentOrder,
       filter = ViewBag.CurrentFilter,
       d_start = ViewBag.CurrentDateStart,
       d_end = ViewBag.CurrentDateEnd,
       page = page
   }))
    </div>

</div>
<script>
    if (window.ReportIndex) {
        loadScripts("ReportIndex()", true)
    }
</script>
